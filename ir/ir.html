<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Police Incident Report — GTA SAMP</title>
<style>
  :root{
    --bg:#f6f8fb;--card:#fff;--text:#0f1724;--muted:#556;--accent:#1f6feb;
  }
  [data-theme="dark"]{
    --bg:#0b1116;--card:#071016;--text:#e6eef8;--muted:#9fb0cf;--accent:#60a5fa;
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue";
       background:var(--bg);color:var(--text);margin:0;padding:24px;}
  .wrap{max-width:1000px;margin:0 auto;display:grid;grid-template-columns:1fr 360px;gap:18px;}
  .card{background:var(--card);padding:18px;border-radius:12px;
        box-shadow:0 6px 20px rgba(2,6,23,0.06);}
  h1{margin:0 0 8px;font-size:20px;}
  label{display:block;margin:10px 0 4px;color:var(--muted);font-size:13px;}
  input,textarea{width:100%;padding:10px;border-radius:8px;
                 border:1px solid rgba(0,0,0,0.08);background:transparent;
                 color:var(--text);}
  textarea{min-height:120px;resize:vertical;}
  .btn{padding:8px 12px;border:none;border-radius:8px;cursor:pointer;
       background:var(--accent);color:#fff;}
  .btn.secondary{background:transparent;color:var(--accent);
                 border:1px solid rgba(0,0,0,0.06);}
  .flex{display:flex;gap:8px;align-items:center;}
  .controls{display:flex;justify-content:space-between;align-items:center;}
  .preview{white-space:pre-wrap;background:linear-gradient(180deg,
          rgba(0,0,0,0.02),transparent);padding:10px;border-radius:8px;
          border:1px dashed rgba(0,0,0,0.05);min-height:120px;}
  @media(max-width:900px){.wrap{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="controls">
      <h1>Police Incident Report</h1>
      <select id="theme">
        <option value="light">Светлая</option>
        <option value="dark">Тёмная</option>
      </select>
    </div>

    <form id="form">
      <label>Имя Фамилия офицера и жетон (#)</label>
      <input type="text" name="officer" required placeholder="John Doe #124">

      <label>Дата и время происшествия</label>
      <input type="text" name="datetime" required placeholder="26/10/2025 — 14:30">

      <label>Место происшествия</label>
      <input type="text" name="location" required placeholder="Idlewood, Los Santos">

      <label>Подозреваемые</label>
      <textarea name="suspects" placeholder="Имена, ID, описание..."></textarea>

      <label>Пострадавшие</label>
      <textarea name="victims" placeholder="Имена, ID, состояние..."></textarea>

      <label>Свидетели</label>
      <textarea name="witnesses" placeholder="Имена, контакты..."></textarea>

      <label>Описание инцидента</label>
      <textarea name="description" placeholder="Подробно опиши события..."></textarea>

      <label>Принятые меры</label>
      <textarea name="actions" placeholder="Арест, вызов EMS, отчёт начальству..."></textarea>

      <label>Материалы дела (доказательства, ссылки, фото)</label>
      <textarea name="evidence" placeholder="https://..."></textarea>

      <div class="flex" style="margin-top:10px;flex-wrap:wrap;">
        <button type="button" class="btn" id="generate">Сгенерировать отчёт</button>
        <button type="button" class="btn secondary" id="copy">Копировать BB-код</button>
        <button type="button" class="btn secondary" id="download">Скачать .txt</button>
        <button type="button" class="btn secondary" id="clear">Очистить форму</button>
      </div>
    </form>
  </div>

  <div class="card">
    <h1>BB-код отчёта</h1>
    <div id="preview" class="preview">После генерации здесь появится отчёт.</div>
  </div>
</div>

<script>
(function(){
  const form=document.getElementById('form');
  const prev=document.getElementById('preview');
  const themeSel=document.getElementById('theme');

  function genBB(data){
    return `[b]OFFICER:[/b] ${data.officer||''}

[b]DATE/TIME:[/b] ${data.datetime||''}

[b]LOCATION:[/b] ${data.location||''}

[b]SUSPECTS:[/b]
${data.suspects||''}

[b]VICTIMS:[/b]
${data.victims||''}

[b]WITNESSES:[/b]
${data.witnesses||''}

[b]DESCRIPTION:[/b]
${data.description||''}

[b]ACTIONS TAKEN:[/b]
${data.actions||''}

[b]EVIDENCE / CASE MATERIALS:[/b]
${data.evidence||''}

[hr]
[i]Report generated automatically via PD Incident Generator[/i]`;
  }

  document.getElementById('generate').onclick=()=>{
    const data=Object.fromEntries(new FormData(form).entries());
    const bb=genBB(data);
    prev.textContent=bb;
    localStorage.setItem('pd_report_data',JSON.stringify(data));
    localStorage.setItem('pd_report_bb',bb);
  };

  document.getElementById('copy').onclick=()=>{
    navigator.clipboard.writeText(prev.textContent||'');
    alert('BB-код скопирован!');
  };

  document.getElementById('download').onclick=()=>{
    const blob=new Blob([prev.textContent||''],{type:'text/plain'});
    const a=document.createElement('a');
    a.href=URL.createObjectURL(blob);
    a.download='incident_report.txt';
    a.click();URL.revokeObjectURL(a.href);
  };

  document.getElementById('clear').onclick=()=>{
    if(!confirm('Очистить форму?'))return;
    form.reset();prev.textContent='После генерации здесь появится отчёт.';
    localStorage.removeItem('pd_report_data');
  };

  // сохранение и загрузка
  const saved=localStorage.getItem('pd_report_data');
  if(saved){
    const data=JSON.parse(saved);
    for(const k in data){if(form[k])form[k].value=data[k];}
    const bb=localStorage.getItem('pd_report_bb');
    if(bb)prev.textContent=bb;
  }

  // тема
  function applyTheme(t){
    document.documentElement.setAttribute('data-theme',t==='dark'?'dark':'light');
    themeSel.value=t;
    localStorage.setItem('pd_theme',t);
  }
  themeSel.onchange=()=>applyTheme(themeSel.value);
  applyTheme(localStorage.getItem('pd_theme')||'light');
})();
</script>
</body>
</html>
